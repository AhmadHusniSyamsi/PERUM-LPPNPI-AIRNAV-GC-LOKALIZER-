{% extends "base.html" %}
{% block content %}
<div class="data-section">
  <div class="container">
    
    <h2 class="fw-bold text-center mb-4" style="color:#0a1f44;">
      STATUS GC LOCALIZER
    </h2>
   

    <!-- Cari -->
    <div class="row mb-3 align-items-center">
      <div class="col-md-6 mb-2 mb-md-0">
        <input type="text" id="searchInput" class="form-control shadow-sm" placeholder="Search...">
      </div>
    </div>

    <!-- Tabel -->
    <div class="table-responsive custom-table-wrapper ">
      <table id="gcTable" class="custom-table">
        <thead>
          <tr>
            <th>No</th>
            <th>Lokasi</th>
            <th>Tanggal</th>
            <th>Teknisi</th>
            <th>Status</th>
            <th>Manager</th>
            <th>Cetak</th>
          </tr>
        </thead>
        <tbody>
          {% for gc in ground_check %}
          <tr>
            <td class="fw-bold text-center">{{ loop.index }}</td>
            <td class="text-center">{{ gc.lokasi }}</td>
            <td class="text-center">{{ gc.tanggal.strftime("%d-%m-%Y") }}</td>
            <td class="text-center" style="white-space: normal; max-width: 180px;" >{{ gc.teknisi }}</td>
            <td class="text-center">
              {% if gc.status == "Selesai" %}
                <span class="badge bg-success px-3 py-2 rounded-pill">Selesai</span>
              {% else %}
                <span class="badge bg-warning text-dark px-3 py-2 rounded-pill">Proses</span>
              {% endif %}
            </td>
            <td class="text-center">
              {% if gc.manager %}
                <span class="fw-semibold">{{ gc.manager }}</span>
              {% else %}
                <span class="text-muted">-</span>
              {% endif %}
            </td>
            <td class="text-center">
              {% if gc.status == "Selesai" %}
                <a href="{{ url_for('groundcheck.cetak_gc', id=gc.id) }}" target="_blank" 
                    class="btn btn-sm btn-outline-light d-flex justify-content-center align-items-center gap-1 flex-wrap px-2 py-1"
       style="min-width:70px;">
                  <i class="bi bi-printer">  Print</i> 
                </a>
              {% else %}
                <span class="text-white fst-italic">Waiting respons</span>
              {% endif %}
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="7" class="text-center text-muted py-4">Belum ada data</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-4 text-start">
      <a href="{{ url_for('groundcheck.lihat_data') }}" class="btn btn-outline-white text-white shadow-sm">
    Back
      </a>
    </div>
  </div>
</div>

<script>
document.getElementById("searchInput").addEventListener("keyup", function() {
  let filter = this.value.toLowerCase();
  let rows = document.querySelectorAll("#gcTable tbody tr");
  rows.forEach(row => {
    let text = row.innerText.toLowerCase();
    row.style.display = text.includes(filter) ? "" : "none";
  });
});
</script>

<style>
   .data-section {
   background: linear-gradient(
    to bottom,
    #ffffff 0%,    
    #f2f6fb 15%,   
    #012b5a 55%,   
    #0a1f44 100%   
  );
min-height: 100vh;         
padding: 40px 0;    
}
/* Bungkus tabel */
.custom-table-wrapper {
 margin: 20px 0;
  border: 2px solid linear-gradient(
    to bottom,
    #ffffff 0%,    
    #f2f6fb 15%,   
    #012b5a 55%,   
    #0a1f44 100%   
  );
  border-radius: 12px;
  overflow-x: visible;
}
/* Hanya aktif di mobile */
@media (max-width: 992px) {
  .custom-table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Tabel */
.custom-table {
  width: 100%;
  border-collapse: collapse;
  font-family: "Poppins", sans-serif;
  color:white ;
  background: linear-gradient(
    to bottom,
    #ffffff 0%,    
    #114381 15%,   
    #012b5a 55%,   
    #0a1f44 100%   
  );
}

.custom-table thead {
  background: linear-gradient(
    to bottom, 
    #114381 15%,   
    #012b5a 55%,    
  );
  color: #012b5a;
  text-align: center;
}

.custom-table th,
.custom-table td {
  padding: 12px 15px;
  border-bottom: 1px solid #eee;
  vertical-align: middle;
}

.custom-table tbody tr:hover {
  background: rgba(255,255,255,0.05);
  transform: scale(1.01);
  transition: 0.2s;
}

.custom-table .btn {
  font-size: 0.8rem;
  padding: 4px 8px;
}

@media (max-width: 768px) {
  .custom-table {
    font-size: 13px;
  }
  .custom-table th, .custom-table td {
    padding: 6px;
    white-space: normal !important;
    word-wrap: break-word;
  }
}
</style>
{% endblock %}

{% block footer %}
<footer class="footer-section text-white" style="background-color:#0a1f44;">
  <div class="container py-4">
    <div class="text-center mt-3 small">
      &copy; <span id="year"></span> AirNav Surabaya. All Rights Reserved.
    </div>
  </div>
</footer>
{% endblock %}
